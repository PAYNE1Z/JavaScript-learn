<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>globle全局对象</title>
  </head>
  <body>
    <script type="text/javascript">
      var uri = 'http://www.baidu.cn/status/student info.html?level=3#&name="jack ma"&score=90%';
      // URI 编码
      // encodeURI(URIstr)
      // encodeURI不编码字符有82(所有非基本字符、Mark字符和保留字符)个：!,#,$,&,',", (,),*,+,,,-,.,/,:,;,=,?,@,_,~,0-9,a-z,A-Z
      console.log('encodeURI: ' + encodeURI(uri));
      // encodeURIComponent(URIstr)
      // encodeURIComponent不编码字符有71((所有非基本字符、Mark字符)个：!, ',", (,),*,-,.,_,~,0-9,a-z,A-Z
      console.log('encodeURIComponent: ' + encodeURIComponent(uri));

      // URI 解码 (对应编码的两个函数,对相关特殊字符进行解码)
      // decodeURI(URIstr)
      // decodeURIComponent(URIstr)


      // window 对象(常用属性与方法: https://www.w3school.com.cn/jsref/dom_obj_window.asp)
      /*
        Window 对象表示一个浏览器窗口或一个框架。在客户端 JavaScript 中，Window 对象是全局对象，所有的表达式都在当前的环境中计算。也就是说，要引用当前窗口根本不需要特殊的语法，可以把那个窗口的属性作为全局变量来使用。例如，可以只写 document，而不必写 window.document。

        同样，可以把当前窗口对象的方法当作函数来使用，如只写 alert()，而不必写 Window.alert()。

        除了上面列出的属性和方法，Window 对象还实现了核心 JavaScript 所定义的所有全局属性和方法。

        Window 对象的 window 属性和 self 属性引用的都是它自己。当你想明确地引用当前窗口，而不仅仅是隐式地引用它时，可以使用这两个属性。除了这两个属性之外，parent 属性、top 属性以及 frame[] 数组都引用了与当前 Window 对象相关的其他 Window 对象。
       */
      var a = 12;
      function echoSomething(){
        console.log('globle a: ' + a);
        // window.alert('globle a: ' + a);
        // alert('globle a: ' + window.a);
      }
      echoSomething();  // 三个结果输出是一样的


      // Math 数学对象
      // 方法
      var nums = [1,3,5,8,12,9,6];
      console.log('Math.max.apply: ' + Math.max.apply(null, nums));
      console.log('Math.max: ' + Math.max(1,3,5,8,12,9,6));  //取最大值

      console.log('Math.min.apply: ' + Math.min.apply(null, nums));
      console.log('Math.min: ' + Math.min(1,3,5,8,12,9,6));  //取最小值

      var num = 98.01
      console.log('Math.ceil: ' + Math.ceil(num)); //天花板函数(向上取整: 去掉小数位,整数位+1)
      console.log('Math.floor: ' + Math.floor(num)); //地板函数(向下取整: 去掉小数位,整数位不变)
      console.log('Math.round: ' + Math.round(num)); //标准四舍五入(只对小数点后一位有效)

      console.log('Math.random: ' + Math.random()); //随机数 (0 <= random < 1)


      // 示例: 获取min到max之间的整数(1~100)
      function getIntNum(min, max) {
        return Math.ceil(Math.random() * max - min);
      }
      console.log('getIntNum: ' + getIntNum(1,100));


      // 示例: 获取随机颜色rgb(0~255,0~255,0~255)
      function getRandomColor() {
        var r = getIntNum(0,255), g = getIntNum(0,255), b = getIntNum(0,255);
        // 模版字符串 `${var}`
        var _color = `rgb(${r},${g},${b})`;
        return _color;
      }
      randomColor = getRandomColor();
      console.log('color: ' + randomColor);
      document.body.style.backgroundColor = randomColor;  // 修改当前页面背景色
      // window.location.reload(); // 自动刷新页面
      // setTimeout('myrefresh()', 5000);  // 自动刷新间隔1秒


      // 示例: 获取随机验证码 四位(数字+字母)
      function getVerificationCode() {
        var randomArray = [0,1,2,3,4,5,6,7,8,9,'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z']
        var code = '', codeLength = 4;
        for (i=0; i<codeLength; i++) {
          var index = getIntNum(0, randomArray.length) - 1
          code += randomArray[index]; // 取随机索引,并从列表中取元素进行拼接
        }
        return code;
      }
      vCode = getVerificationCode();
      document.write(`<h1>${vCode}</h1>`);

    </script>
  </body>
</html>
